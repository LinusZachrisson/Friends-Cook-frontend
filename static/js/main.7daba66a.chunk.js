(this["webpackJsonpfriends-cook"]=this["webpackJsonpfriends-cook"]||[]).push([[0],{36:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(29),r=n.n(i),s=n(3),l=(n(36),n(9)),d=n(2),j=n(10),o=n.n(j),b=a.a.createContext({defaultValue:{}}),u=n(0);var h=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),r=Object(s.a)(i,2),l=r[0],d=r[1],j=Object(c.useContext)(b);return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={username:n,password:l};o.a.post("https://cook-and-friends.herokuapp.com/user/register",t,{withCredentials:!0}).then((function(e){j.setUsername(e.data.username),a(""),d("")}))}(e)},children:[Object(u.jsx)("h3",{children:"Registrera ny anv\xe4ndare:"}),Object(u.jsx)("input",{type:"text",placeholder:"V\xe4lj anv\xe4ndarnamn",value:n,onChange:function(e){return a(e.target.value)}})," ",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",placeholder:"V\xe4lj l\xf6senord",value:l,onChange:function(e){return d(e.target.value)}})," ",Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",children:"Registrera"})]})})};var O=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),r=Object(s.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)(!1),h=Object(s.a)(j,2),O=h[0],p=h[1],x=Object(c.useContext)(b);return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={username:n,password:l};o.a.post("https://cook-and-friends.herokuapp.com/user/login",t,{withCredentials:!0}).then((function(e){x.setUsername(e.data.username),a(""),d(""),p(!1)})).catch((function(){p(!0)}))}(e)},children:[O&&Object(u.jsxs)("div",{className:"login-error",children:["Fel anv\xe4ndarnamn eller l\xf6senord. ",Object(u.jsx)("br",{}),"F\xf6rs\xf6k igen!"]}),Object(u.jsx)("input",{type:"text",placeholder:"Anv\xe4ndarnamn",value:n,onChange:function(e){return a(e.target.value)}})," ",Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",placeholder:"L\xf6senord",value:l,onChange:function(e){return d(e.target.value)}})," ",Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",children:"Logga in"})]})})},p=n(16),x=n(12),m=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],i=n[1];Object(c.useEffect)((function(){fetch("https://cook-and-friends.herokuapp.com/readall").then((function(e){return e.json()})).then((function(t){var n=[];for(var c in t)t[c].LikedBy.includes(e.user)&&n.push(t[c]);i(n)}))}),[a]);var r=function(t,n){fetch("https://cook-and-friends.herokuapp.com/write",{method:"POST",body:JSON.stringify({Id:n.target.id,Title:n.target.title,ImageUrl:n.target.parentNode.id,LikedBy:e.myLikes,Remove:t}),headers:{"Content-Type":"application/json"}})};return Object(u.jsxs)("div",{className:"profile-container",children:[Object(u.jsxs)("p",{children:["Gillade recept av ",Object(u.jsxs)("span",{children:[" ",e.user]})]}),Object(u.jsx)("div",{className:"profile-liked-rec-container",children:a.map((function(t,n){return Object(u.jsxs)("div",{className:"profile-recipe-con",children:[Object(u.jsx)("a",{href:"https://www.ica.se/recept/"+t.Id,target:"_blank",children:Object(u.jsx)("img",{src:t.ImageUrl,alt:"Food of recepie"})})," ",Object(u.jsx)("h4",{children:t.Title}),t.LikedBy.includes(e.myLikes)?Object(u.jsx)("button",{title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return r(!0,e)},children:"Ogilla"}):Object(u.jsxs)("button",{title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return r(!1,e)},children:[" ","Gilla"," "]})]},n)}))})]})},f=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(null),l=Object(s.a)(r,2),d=l[0],j=l[1];Object(c.useEffect)((function(){b()}),[]);var b=function(){o.a.get("https://cook-and-friends.herokuapp.com/api/").then((function(e){if(!e.data.Recipes)throw Error("Recepten kunde tyv\xe4rr inte l\xe4sas in.");j(null),i(e.data.Recipes)})).catch((function(e){j(e.message)}))},h=function(t){t.target.textContent="Gillat!";fetch("https://cook-and-friends.herokuapp.com/write",{method:"POST",body:JSON.stringify({Id:t.target.id,Title:t.target.title,ImageUrl:t.target.parentNode.id,LikedBy:e.user}),headers:{"Content-Type":"application/json"}})};return Object(u.jsxs)("div",{className:"random-recipes-container",children:[Object(u.jsxs)("p",{className:"random-first-text",children:["H\xe4r du hitta nya recept att ",Object(u.jsx)("span",{children:"gilla, laga"}),Object(u.jsx)("br",{})," och ",Object(u.jsx)("span",{children:"inspirera"})," dina v\xe4nner med."]}),Object(u.jsxs)("div",{className:"random-btns-con",children:[Object(u.jsx)("a",{onClick:b,className:"new-recipes-btn",children:"Slumpa nya recept"}),Object(u.jsxs)("div",{className:"inp-sea",children:[Object(u.jsx)("input",{type:"text",placeholder:"S\xd6K..."}),Object(u.jsx)(x.c,{className:"search-icon"})]})]}),Object(u.jsxs)("div",{children:[d&&Object(u.jsx)("div",{className:"random-recipe-container",children:Object(u.jsx)("div",{className:"random-first-text",children:d})}),a.map((function(e){return Object(u.jsxs)("div",{id:e.ImageUrl,className:"random-recipe-box",children:[Object(u.jsxs)("a",{href:"https://www.ica.se/recept/"+e.Id,target:"_blank",className:"random-recipe-container",children:[Object(u.jsx)("img",{src:e.ImageUrl,alt:"Bilden kunde inte laddas"}),Object(u.jsx)("p",{className:"random-recipe-title",children:e.Title})]}),Object(u.jsx)("button",{onClick:h,title:e.Title,id:e.Id,imageurl:e.ImageUrl,children:"Gilla"})]},e.Id)}))]})]})};var v=function(e){var t=Object(c.useState)(),n=Object(s.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(),l=Object(s.a)(r,2),d=l[0],j=l[1];Object(c.useEffect)((function(){fetch("https://cook-and-friends.herokuapp.com/users/getusers").then((function(e){return e.json()})).then((function(e){i(e)}))}),[]);var o=function(e){j(e.target.innerText)};return void 0===a?Object(u.jsx)("div",{className:"aside-container loading",children:"Loading..."}):d?Object(u.jsxs)("div",{className:"friends-container",children:[Object(u.jsx)("button",{onClick:function(){j(void 0)},children:"Back"}),Object(u.jsx)(m,{user:d,myLikes:e.myLikes})]}):Object(u.jsxs)("div",{className:"friends-container",children:[Object(u.jsx)("h3",{children:"Dina v\xe4nner"}),a.map((function(e){return Object(u.jsxs)("div",{className:"friend-container",children:[Object(u.jsx)("div",{onClick:o,className:"friend-con-name",children:e.username},e._id),Object(u.jsx)("div",{children:Object(u.jsx)("button",{children:"Avf\xf6lj"})})]})}))]})};var g=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],i=n[1],r=Object(c.useContext)(b);Object(c.useEffect)((function(){fetch("https://cook-and-friends.herokuapp.com/users/getlikedrecipes").then((function(e){return e.json()})).then((function(e){console.log(e),i(e)}))}),[]);var l=function(e,t){t.target.textContent=e?"Borttaget!":"Gillat!";fetch("https://cook-and-friends.herokuapp.com/write",{method:"POST",body:JSON.stringify({Id:t.target.id,Title:t.target.title,ImageUrl:t.target.parentNode.id,LikedBy:r.username,Remove:e}),headers:{"Content-Type":"application/json"}})};return Object(u.jsxs)("div",{className:"flow-container",children:[Object(u.jsxs)("p",{className:"flow-p",children:[Object(u.jsx)("span",{children:"Beh\xf6ver du middagstips?"}),Object(u.jsx)("br",{})," Kolla in vad dina v\xe4nner gillar f\xf6r recept."]}),a.slice(0).reverse().map((function(t){return Object(u.jsx)("div",{children:t.LikedBy.includes(e.myLikes)&&t.LikedBy.length-1===0?"":Object(u.jsxs)("div",{className:"flow-recipe-container",id:t.ImageUrl,children:[Object(u.jsx)("a",{href:"https://www.ica.se/recept/"+t.Id,target:"_blank",children:Object(u.jsx)("img",{src:t.ImageUrl,alt:"Bilden kunde inte laddas"})}),Object(u.jsx)("p",{className:"flow-recipe-title",children:t.Title})," ",Object(u.jsx)("div",{className:"flow-likedby",children:t.LikedBy.length-1===0?Object(u.jsxs)("p",{children:["Gillas av"," ",Object(u.jsx)("span",{children:t.LikedBy[0]})," "]}):Object(u.jsxs)("p",{children:[" ",Object(u.jsx)("span",{children:t.LikedBy[0]})," och"," ",Object(u.jsx)("span",{children:t.LikedBy.length-1})," ","v\xe4nner till gillar receptet."]})}),t.LikedBy.includes(e.myLikes)?Object(u.jsx)("button",{className:"flow-like-btn",title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return l(!0,e)},children:"Ogilla"}):Object(u.jsxs)("button",{className:"flow-like-btn",title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return l(!1,e)},children:[" ","Gilla"," "]})]},t._id)},t._id)}))]})};var k=function(e){var t,n=e.user;return Object(u.jsxs)(l.a,{children:[Object(u.jsx)("div",{className:"navbar",children:Object(u.jsxs)("nav",{children:[Object(u.jsx)(l.c,(t={exact:!0,activeClassName:"active"},Object(p.a)(t,"exact",!0),Object(p.a)(t,"to","/"),Object(p.a)(t,"children",Object(u.jsx)("div",{children:Object(u.jsx)(x.b,{})})),t)),Object(u.jsx)(l.c,{exact:!0,activeClassName:"active",to:"/friends",children:Object(u.jsx)("div",{children:Object(u.jsx)(x.a,{})})}),Object(u.jsx)(l.c,{exact:!0,activeClassName:"active",to:"/recipes",children:Object(u.jsx)("div",{children:Object(u.jsx)(x.c,{})})}),Object(u.jsx)(l.c,{exact:!0,activeClassName:"active",to:"/mypage",children:Object(u.jsx)("div",{children:Object(u.jsx)(x.d,{className:"navbar-mypage"})})})]})}),Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{exact:!0,path:"/",children:Object(u.jsx)(g,{myLikes:n})}),Object(u.jsx)(d.a,{path:"/friends",children:Object(u.jsx)(v,{myLikes:n})}),Object(u.jsx)(d.a,{path:"/recipes",children:Object(u.jsx)(f,{user:n})}),"s",Object(u.jsx)(d.a,{path:"/mypage",children:Object(u.jsx)(m,{user:n,myLikes:n})}),Object(u.jsx)(d.a,{path:"*",component:""})," "]})]})};var y=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),r=Object(s.a)(i,2),j=r[0],p=r[1];return Object(c.useEffect)((function(){o.a.get("https://cook-and-friends.herokuapp.com/user/islogedin",{withCredentials:!0}).then((function(e){a(e.data.username)}))}),[]),Object(u.jsx)(b.Provider,{value:{username:n,setUsername:a},children:void 0!==n?Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("button",{onClick:function(){o.a.post("https://cook-and-friends.herokuapp.com/user/logout",{},{withCredentials:!0}).then((function(){a()}))},children:"Logga ut"})," ",Object(u.jsxs)("p",{children:["Hej, ",Object(u.jsx)("span",{children:n})]})," "]}),Object(u.jsx)(k,{user:n})]}):Object(u.jsx)(l.a,{basename:"/",children:Object(u.jsxs)("div",{className:"startpage-container",children:[Object(u.jsx)("h1",{children:"Friends&Cook"}),Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{exact:!0,path:"/",children:Object(u.jsx)(O,{})}),Object(u.jsx)(d.a,{exact:!0,path:"/Register",component:h,onClick:function(){return p(!j)}})]}),Object(u.jsx)("div",{className:"new-user",children:j?Object(u.jsx)(l.b,{to:"/",onClick:function(){return p(!j)},children:"Har du redan konto? Logga in"}):Object(u.jsx)(l.b,{to:"/Register",onClick:function(){return p(!j)},children:"Registrera ny anv\xe4ndare"})})]})})})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.7daba66a.chunk.js.map