(this["webpackJsonpfriends-cook"]=this["webpackJsonpfriends-cook"]||[]).push([[0],{35:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(28),a=n.n(r),s=n(3),l=(n(35),n(9)),d=n(2),j=n(10),o=n.n(j),u=i.a.createContext({defaultValue:{}}),b=n(0);var h=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),l=a[0],d=a[1],j=Object(c.useContext)(u);return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={username:n,password:l};o.a.post("https://cook-and-friends.herokuapp.com/user/register",t,{withCredentials:!0}).then((function(e){j.setUsername(e.data.username),i(""),d("")}))}(e)},children:[Object(b.jsx)("h3",{children:"Registrera ny anv\xe4ndare:"}),Object(b.jsx)("input",{type:"text",placeholder:"V\xe4lj anv\xe4ndarnamn",value:n,onChange:function(e){return i(e.target.value)}})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",placeholder:"V\xe4lj l\xf6senord",value:l,onChange:function(e){return d(e.target.value)}})," ",Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:"Registrera"})]})})};var O=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),l=a[0],d=a[1],j=Object(c.useState)(!1),h=Object(s.a)(j,2),O=h[0],p=h[1],x=Object(c.useContext)(u);return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t={username:n,password:l};o.a.post("https://cook-and-friends.herokuapp.com/user/login",t,{withCredentials:!0}).then((function(e){x.setUsername(e.data.username),i(""),d(""),p(!1)})).catch((function(){p(!0)}))}(e)},children:[O&&Object(b.jsxs)("div",{className:"login-error",children:["Fel anv\xe4ndarnamn eller l\xf6senord. ",Object(b.jsx)("br",{}),"F\xf6rs\xf6k igen!"]}),Object(b.jsx)("input",{type:"text",placeholder:"Anv\xe4ndarnamn",value:n,onChange:function(e){return i(e.target.value)}})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",placeholder:"L\xf6senord",value:l,onChange:function(e){return d(e.target.value)}})," ",Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:"Logga in"})]})})},p=n(12),x=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),i=n[0],r=n[1];Object(c.useEffect)((function(){fetch("https://cook-and-friends.herokuapp.com/readall").then((function(e){return e.json()})).then((function(t){var n=[];for(var c in t)t[c].LikedBy.includes(e.user)&&n.push(t[c]);r(n)}))}),[i]);var a=function(t,n){fetch("https://cook-and-friends.herokuapp.com/write",{method:"POST",body:JSON.stringify({Id:n.target.id,Title:n.target.title,ImageUrl:n.target.parentNode.id,LikedBy:e.myLikes,Remove:t}),headers:{"Content-Type":"application/json"}})};return Object(b.jsxs)("div",{className:"profile-container",children:[Object(b.jsxs)("p",{children:["Gillade recept av ",Object(b.jsxs)("span",{children:[" ",e.user]})]}),Object(b.jsx)("div",{className:"profile-liked-rec-container",children:i.map((function(t,n){return Object(b.jsxs)("div",{className:"profile-recipe-con",children:[Object(b.jsx)("a",{href:"https://www.ica.se/recept/"+t.Id,target:"_blank",children:Object(b.jsx)("img",{src:t.ImageUrl,alt:"Food of recepie"})})," ",Object(b.jsx)("h4",{children:t.Title}),t.LikedBy.includes(e.myLikes)?Object(b.jsx)("button",{title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return a(!0,e)},children:"Ogilla"}):Object(b.jsxs)("button",{title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return a(!1,e)},children:[" ","Gilla"," "]})]},n)}))})]})},m=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(null),l=Object(s.a)(a,2),d=l[0],j=l[1];Object(c.useEffect)((function(){u()}),[]);var u=function(){o.a.get("https://cook-and-friends.herokuapp.com/api/").then((function(e){if(!e.data.Recipes)throw Error("Recepten kunde tyv\xe4rr inte l\xe4sas in.");j(null),r(e.data.Recipes)})).catch((function(e){j(e.message)}))},h=function(t){t.target.textContent="Gillat!";fetch("https://cook-and-friends.herokuapp.com/write",{method:"POST",body:JSON.stringify({Id:t.target.id,Title:t.target.title,ImageUrl:t.target.parentNode.id,LikedBy:e.user}),headers:{"Content-Type":"application/json"}})};return Object(b.jsxs)("div",{className:"random-recipes-container",children:[Object(b.jsxs)("p",{className:"random-first-text",children:["H\xe4r du hitta nya recept att ",Object(b.jsx)("span",{children:"gilla, laga"}),Object(b.jsx)("br",{})," och ",Object(b.jsx)("span",{children:"inspirera"})," dina v\xe4nner med."]}),Object(b.jsxs)("div",{className:"random-btns-con",children:[Object(b.jsx)("a",{onClick:u,className:"new-recipes-btn",children:"Slumpa nya recept"}),Object(b.jsxs)("div",{className:"inp-sea",children:[Object(b.jsx)("input",{type:"text",placeholder:"S\xd6K..."}),Object(b.jsx)(p.c,{className:"search-icon"})]})]}),Object(b.jsxs)("div",{children:[d&&Object(b.jsx)("div",{className:"random-recipe-container",children:Object(b.jsx)("div",{className:"random-first-text",children:d})}),i.map((function(e){return Object(b.jsxs)("div",{id:e.ImageUrl,className:"random-recipe-box",children:[Object(b.jsxs)("a",{href:"https://www.ica.se/recept/"+e.Id,target:"_blank",className:"random-recipe-container",children:[Object(b.jsx)("img",{src:e.ImageUrl,alt:"Bilden kunde inte laddas"}),Object(b.jsx)("p",{className:"random-recipe-title",children:e.Title})]}),Object(b.jsx)("button",{onClick:h,title:e.Title,id:e.Id,imageurl:e.ImageUrl,children:"Gilla"})]},e.Id)}))]})]})};var f=function(e){var t=Object(c.useState)(),n=Object(s.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(),l=Object(s.a)(a,2),d=l[0],j=l[1];Object(c.useEffect)((function(){fetch("https://cook-and-friends.herokuapp.com/users/getusers").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]);var o=function(e){j(e.target.innerText)};return void 0===i?Object(b.jsx)("div",{className:"aside-container loading",children:"Loading..."}):d?Object(b.jsxs)("div",{className:"friends-container",children:[Object(b.jsx)("button",{onClick:function(){j(void 0)},children:"Back"}),Object(b.jsx)(x,{user:d,myLikes:e.myLikes})]}):Object(b.jsxs)("div",{className:"friends-container",children:[Object(b.jsx)("h3",{children:"Dina v\xe4nner"}),i.map((function(e){return Object(b.jsxs)("div",{className:"friend-container",children:[Object(b.jsx)("div",{onClick:o,className:"friend-con-name",children:e.username},e._id),Object(b.jsx)("div",{children:Object(b.jsx)("button",{children:"Avf\xf6lj"})})]})}))]})};var v=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),i=n[0],r=n[1],a=Object(c.useContext)(u);Object(c.useEffect)((function(){fetch("https://cook-and-friends.herokuapp.com/users/getlikedrecipes").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]);var l=function(e,t){t.target.textContent=e?"Borttaget!":"Gillat!";fetch("https://cook-and-friends.herokuapp.com/write",{method:"POST",body:JSON.stringify({Id:t.target.id,Title:t.target.title,ImageUrl:t.target.parentNode.id,LikedBy:a.username,Remove:e}),headers:{"Content-Type":"application/json"}})};return Object(b.jsxs)("div",{className:"flow-container",children:[Object(b.jsxs)("p",{className:"flow-p",children:[Object(b.jsx)("span",{children:"Beh\xf6ver du middagstips?"}),Object(b.jsx)("br",{})," Kolla in vad dina v\xe4nner gillar f\xf6r recept."]}),i.slice(0).reverse().map((function(t){return Object(b.jsx)("div",{children:t.LikedBy.includes(e.myLikes)&&t.LikedBy.length-1===0?"":Object(b.jsxs)("div",{className:"flow-recipe-container",id:t.ImageUrl,children:[Object(b.jsx)("a",{href:"https://www.ica.se/recept/"+t.Id,target:"_blank",children:Object(b.jsx)("img",{src:t.ImageUrl,alt:"Bilden kunde inte laddas"})}),Object(b.jsx)("p",{className:"flow-recipe-title",children:t.Title})," ",Object(b.jsx)("div",{className:"flow-likedby",children:t.LikedBy.length-1===0?Object(b.jsxs)("p",{children:["Gillas av"," ",Object(b.jsx)("span",{children:t.LikedBy[0]})," "]}):Object(b.jsxs)("p",{children:[" ",Object(b.jsx)("span",{children:t.LikedBy[0]})," och"," ",Object(b.jsx)("span",{children:t.LikedBy.length-1})," ","v\xe4nner till gillar receptet."]})}),t.LikedBy.includes(e.myLikes)?Object(b.jsx)("button",{className:"flow-like-btn",title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return l(!0,e)},children:"Ogilla"}):Object(b.jsxs)("button",{className:"flow-like-btn",title:t.Title,id:t.Id,imageurl:t.ImageUrl,onClick:function(e){return l(!1,e)},children:[" ","Gilla"," "]})]},t._id)},t._id)}))]})};var g=function(e){var t=e.user;return Object(b.jsxs)(l.a,{children:[Object(b.jsx)("div",{className:"navbar",children:Object(b.jsxs)("nav",{children:[Object(b.jsx)(l.c,{exact:!0,activeClassName:"active",to:"/",children:Object(b.jsx)("div",{children:Object(b.jsx)(p.b,{})})}),Object(b.jsx)(l.c,{exact:!0,activeClassName:"active",to:"/friends",children:Object(b.jsx)("div",{children:Object(b.jsx)(p.a,{})})}),Object(b.jsx)(l.c,{exact:!0,activeClassName:"active",to:"/recipes",children:Object(b.jsx)("div",{children:Object(b.jsx)(p.c,{})})}),Object(b.jsx)(l.c,{exact:!0,activeClassName:"active",to:"/mypage",children:Object(b.jsx)("div",{children:Object(b.jsx)(p.d,{className:"navbar-mypage"})})})]})}),Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{exact:!0,path:"/",children:Object(b.jsx)(v,{myLikes:t})}),Object(b.jsx)(d.a,{path:"/friends",children:Object(b.jsx)(f,{myLikes:t})}),Object(b.jsx)(d.a,{path:"/recipes",children:Object(b.jsx)(m,{user:t})}),"s",Object(b.jsx)(d.a,{path:"/mypage",children:Object(b.jsx)(x,{user:t,myLikes:t})}),Object(b.jsx)(d.a,{path:"*",component:""})," "]})]})};var k=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),a=Object(s.a)(r,2),j=a[0],p=a[1];return Object(c.useEffect)((function(){o.a.get("https://cook-and-friends.herokuapp.com/user/islogedin",{withCredentials:!0}).then((function(e){i(e.data.username)}))}),[]),Object(b.jsx)(u.Provider,{value:{username:n,setUsername:i},children:void 0!==n?Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("button",{onClick:function(){o.a.post("https://cook-and-friends.herokuapp.com/user/logout",{},{withCredentials:!0}).then((function(){i()}))},children:"Logga ut"})," ",Object(b.jsxs)("p",{children:["Hej, ",Object(b.jsx)("span",{children:n})]})," "]}),Object(b.jsx)(g,{user:n})]}):Object(b.jsx)(l.a,{children:Object(b.jsxs)("div",{className:"startpage-container",children:[Object(b.jsx)("h1",{children:"Friends&Cook"}),Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{exact:!0,path:"/",children:Object(b.jsx)(O,{})}),Object(b.jsx)(d.a,{exact:!0,path:"/Register",component:h,onClick:function(){return p(!j)}})]}),Object(b.jsx)("div",{className:"new-user",children:j?Object(b.jsx)(l.b,{to:"/",onClick:function(){return p(!j)},children:"Har du redan konto? Logga in"}):Object(b.jsx)(l.b,{to:"/Register",onClick:function(){return p(!j)},children:"Registrera ny anv\xe4ndare"})})]})})})};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.98154a97.chunk.js.map